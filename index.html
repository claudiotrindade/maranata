<!DOCTYPE html>
<html>

<head>
	<script src="js/aframe.min.js"></script>
	<!-- include aframe-ar.js -->
	<script src="js/aframe-ar.js"></script>
	<style type="text/css">			
		#arjsDebugUIContainer{
			display: none; !important;
		}
		.a-enter-vr-button{
			display: none; !important;
		}
	</style>

</head>
<body style='margin : 0px; overflow: hidden;'>
	<a-scene embedded artoolkit='sourceType: webcam; detectionMode: mono; maxDetectionRate: 30; canvasWidth: 240; canvasHeight: 180' >
		<a-marker preset='custom' type='pattern' url='m-pattern-marker.patt' vidhandler>
			<a-video id="vid" src="assets/video.mp4" preload="auto" loop="true" autoplay="autoplay" muted crossorigin></a-video>
		</a-marker> 
		<a-entity camera></a-entity>  
	</a-scene>
	<script>
		AFRAME.registerComponent('vidhandler', {
			// ...
			init: function () {
			// Set up initial state and variables.
			this.toggle = false;
			this.vid = document.querySelector("#vid")
			this.vid.pause();
			},
			tick:function(){
			
		if(this.el.object3D.visible == true){
			if(!this.toggle){
				this.toggle = true;
				this.vid.play();
			}
			}else{
			this.toggle = false;
			this.vid.pause();
			}
			}
		});
	</script>
</body>


</html>